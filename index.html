<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <p id="mothership"> </p>
    <section id= "defence-ships"></section>
    <section id = "attack-ships"></section>
    <button id = "attack" type="button" onclick="attackAndUpdate()">Attack!</button>
    <style>
        #defence-ships{
            border: black 2px solid;
        }
    </style>
    <script>
        class Spaceship{

            constructor(name, health) {
                this.name = name;
                this.health = health;
            }
        }

        class Mothership extends Spaceship {
            constructor(name, health) {
                super (name, health)
            }
            loseHealthWhenHit() {
                // this.health <= 0 ? this.health = 0 : 
                this.health = this.health -10;
            }
        }
        const motherShip = new Mothership ("Mothership", 100);

        class DefenceShip extends Spaceship {
            constructor(name, health) {
                super (name, health)
            }
            loseHealthWhenHit() {
                // this.health <= 0 ? this.health = 0 : 
                this.health = this.health -10;
            }
        }
        const defenceShip1 = new DefenceShip ("Defenceship1", 80);
        const defenceShip2 = new DefenceShip ("Defenceship2", 80);
        const defenceShip3 = new DefenceShip ("Defenceship3", 80);
        const defenceShip4 = new DefenceShip ("Defenceship4", 80);
        const defenceShip5 = new DefenceShip ("Defenceship5", 80);

        class AttackShip extends Spaceship{
            constructor(name, health) {
                super (name, health)
            }
            loseHealthWhenHit() {
                // this.health <= 0 ? this.health = 0 : 
                this.health = this.health -12 ;

            }
        }
        const attackShip1 = new AttackShip ("Attackship1", 45);
        const attackShip2 = new AttackShip ("Attackship2", 45);
        const attackShip3 = new AttackShip ("Attackship3", 45);
        const attackShip4 = new AttackShip ("Attackship4", 45);
        const attackShip5 = new AttackShip ("Attackship5", 45);
        const attackShip6 = new AttackShip ("Attackship6", 45);
        const attackShip7 = new AttackShip ("Attackship7", 45);
        const attackShip8 = new AttackShip ("Attackship8", 45);

        const motherShipPrint = () => {
            document.getElementById("mothership").innerHTML = '';
            document.getElementById("mothership").insertAdjacentHTML("afterbegin", motherShip.name + "</br>" + motherShip.health + "</br>" + "</br>");
        }
        motherShipPrint();

        const defenceShips = [defenceShip1,defenceShip2,defenceShip3,defenceShip4,defenceShip5];

        const defenceShipPrint = () => {
            document.getElementById("defence-ships").innerHTML = '';
            defenceShips.forEach(deffShips => document.getElementById("defence-ships").insertAdjacentHTML("afterbegin",`<p> ${deffShips.name} ${deffShips.health} </p>`));
        }
        defenceShipPrint();

        const attackShips = [attackShip1,attackShip2,attackShip3,attackShip4,attackShip5,attackShip6,attackShip7,attackShip8];

        const attackShipPrint = () => {
            document.getElementById("attack-ships").innerHTML = "";
            attackShips.forEach(attShips => document.getElementById("attack-ships").insertAdjacentHTML("afterbegin", attShips.name + "</br>" + attShips.health + "</br>" + "</br>"));
        }
        attackShipPrint();

        let shipsArray = [motherShip, defenceShip1,defenceShip2,defenceShip3,defenceShip4,defenceShip5,attackShip1,attackShip2,attackShip3,attackShip4,attackShip5,attackShip6,attackShip7,attackShip8];
        // const randomNum = () => {
        //     return Math.floor(Math.random() * 14)
        // }

        const attackAndUpdate = () => {
            attackRandomShip();
            updateShipsHealth();
        };

        const attackRandomShip = () => {
            const randomNum = Math.floor(Math.random() * shipsArray.length);
            const randomShip = shipsArray[randomNum];
            randomShip.health <= 0 ? shipsArray.splice(randomNum, 1) : randomShip.loseHealthWhenHit();
            shipsArray.length == 0 ? alert("Your game has finished, you have won!") : null;
        } 
        //    if (shipsArray[randomNum].health <= 0) {
        //        return shipsArray[randomNum].splice([randomNum], 1);
        //    }
        //     };

        const updateShipsHealth = () => {
            motherShipPrint();
            defenceShipPrint();
            attackShipPrint();
        }
    </script>
</body>
</html>



